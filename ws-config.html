<!DOCTYPE HTML>
<html lang="en" >
    
    <head>
        
        <meta charset="UTF-8">
        <meta http-equiv="X-UA-Compatible" content="IE=edge" />
        <title>Configuration | Citrus Simulator Reference Guide</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 2.6.7">
        
        
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="apple-touch-icon-precomposed" sizes="152x152" href="gitbook/images/apple-touch-icon-precomposed-152.png">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    <link rel="stylesheet" href="gitbook/style.css">
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-anchors/plugin.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-code_tomorrow_scheme/code-tomorrow-scheme.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-highlight/website.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-search/search.css">
        
    
        
        <link rel="stylesheet" href="gitbook/plugins/gitbook-plugin-fontsettings/website.css">
        
    
    
        <link rel="stylesheet" href="./styles/website.css">
    

        
    
    
    <link rel="next" href="./jms-support.html" />
    
    
    <link rel="prev" href="./ws-support.html" />
    

        
    </head>
    <body>
        
        
    <div class="book"
        data-level="5.1"
        data-chapter-title="Configuration"
        data-filepath="ws-config.md"
        data-basepath="."
        data-revision="Mon Oct 24 2016 11:22:11 GMT+0200 (CEST)"
        data-innerlanguage="">
    

<div class="book-summary">
    <nav role="navigation">
        <ul class="summary">
            
            
            
            

            

            
    
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                
                        <i class="fa fa-check"></i>
                        
                        Introduction
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="1" data-path="preconditions.html">
            
                
                    <a href="./preconditions.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                        Preconditions
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="2" data-path="installation.html">
            
                
                    <a href="./installation.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                        Installation
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3" data-path="concepts.html">
            
                
                    <a href="./concepts.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                        Concepts
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="3.1" data-path="mapping-key-extractor.html">
            
                
                    <a href="./mapping-key-extractor.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.1.</b>
                        
                        Mapping key extractor
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="3.2" data-path="scenarios.html">
            
                
                    <a href="./scenarios.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>3.2.</b>
                        
                        Simulator scenarios
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="4" data-path="rest-support.html">
            
                
                    <a href="./rest-support.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                        REST support
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="4.1" data-path="rest-config.html">
            
                
                    <a href="./rest-config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                        Configuration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="4.2" data-path="rest-request-mapping.html">
            
            <span><b>4.2.</b> Request mapping</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="5" data-path="ws-support.html">
            
                
                    <a href="./ws-support.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                        Web Service support
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter active" data-level="5.1" data-path="ws-config.html">
            
                
                    <a href="./ws-config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>5.1.</b>
                        
                        Configuration
                    </a>
            
            
        </li>
    
        <li class="chapter " data-level="5.2" data-path="ws-soap-faults.html">
            
            <span><b>5.2.</b> SOAP faults</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="6" data-path="jms-support.html">
            
                
                    <a href="./jms-support.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                        JMS support
                    </a>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="6.1" data-path="jms-config.html">
            
                
                    <a href="./jms-config.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                        Configuration
                    </a>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="7" data-path="endpoint-component-support.html">
            
            <span><b>7.</b> Endpoint component support</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="7.1" data-path="endpoint-component-config.html">
            
            <span><b>7.1.</b> Configuration</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="8" data-path="starter.html">
            
            <span><b>8.</b> Starter</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="8.1" data-path="starter-parameter.html">
            
            <span><b>8.1.</b> Parameters</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="9" data-path="user-interface.html">
            
            <span><b>9.</b> Admin UI</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="9.1" data-path="status.html">
            
            <span><b>9.1.</b> Scenario status</span>
            
            
        </li>
    
        <li class="chapter " data-level="9.2" data-path="run.html">
            
            <span><b>9.2.</b> Run starters</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="10" data-path="samples.html">
            
            <span><b>10.</b> Samples</span>
            
            
            <ul class="articles">
                
    
        <li class="chapter " data-level="10.1" data-path="sample-rest.html">
            
            <span><b>10.1.</b> simulator-sample-rest</span>
            
            
        </li>
    
        <li class="chapter " data-level="10.2" data-path="sample-ws.html">
            
            <span><b>10.2.</b> simulator-sample-ws</span>
            
            
        </li>
    
        <li class="chapter " data-level="10.3" data-path="sample-jms.html">
            
            <span><b>10.3.</b> simulator-sample-jms</span>
            
            
        </li>
    

            </ul>
            
        </li>
    
        <li class="chapter " data-level="11" data-path="links.html">
            
                
                    <a href="./links.html">
                
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                        Further Reading
                    </a>
            
            
        </li>
    


            
            <li class="divider"></li>
            <li>
                <a href="https://www.gitbook.com" target="blank" class="gitbook-link">
                    Published with GitBook
                </a>
            </li>
            
        </ul>
    </nav>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="book-header" role="navigation">
    <!-- Actions Left -->
    

    <!-- Title -->
    <h1>
        <i class="fa fa-circle-o-notch fa-spin"></i>
        <a href="./" >Citrus Simulator Reference Guide</a>
    </h1>
</div>

            <div class="page-wrapper" tabindex="-1" role="main">
                <div class="page-inner">
                
                
                    <section class="normal" id="section-">
                    
                        <h2 id="soap-web-services-configuration"><a name="soap-web-services-configuration" class="plugin-anchor" href="#soap-web-services-configuration"><span class="fa fa-link"></span></a>SOAP Web Services configuration</h2>
<p>Once the SOAP support is enabled on the simulator we have different configuration options. The most comfortable way is to
add a <strong>SimulatorWebServiceAdapter</strong> implementation to the classpath. The adapter provides several configuration methods.</p>
<pre><code class="lang-java"><span class="hljs-keyword">public</span> <span class="hljs-keyword">abstract</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">SimulatorWebServiceAdapter</span> <span class="hljs-keyword">implements</span> <span class="hljs-title">SimulatorWebServiceConfigurer</span> </span>{
    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">servletMapping</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;/services/ws/*&quot;</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> MappingKeyExtractor <span class="hljs-title">mappingKeyExtractor</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> XPathPayloadMappingKeyExtractor();
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-keyword">public</span> EndpointInterceptor[] interceptors() {
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> EndpointInterceptor[] { <span class="hljs-keyword">new</span> LoggingEndpointInterceptor() };
    }
}
</code></pre>
<p>The adapter defines methods that configure the simulator SOAP message handling. For instance we can add another mapping key extractor implementation or
add endpoint interceptors to the SOAP service call handling.</p>
<p>The <strong>servletMapping</strong> defines how clients can access the simulator SOAP service. Assuming the Spring boot simulator application is running on port 8080 the
SOAP service would be accessible on this URI:</p>
<pre><code>http://localhhost:8080/services/ws/*
</code></pre><p>The clients can send SOAP calls to that endpoint URI then. The simulator will respond with respective SOAP responses based on the called
scenario.</p>
<p>You can simply extend the adapter in a custom class for adding customizations.</p>
<pre><code class="lang-java"><span class="hljs-annotation">@Component</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">MySimulatorWebServiceAdapter</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SimulatorWebServiceAdapter</span> </span>{

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">servletMapping</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;/my-soap-service/**&quot;</span>;
    }
}
</code></pre>
<p>As you can see the class is annotated with <strong>@Component</strong> annotation. This is because the adapter should be recognized by Spring in order to overwrite the default
SOAP adapter behavior. The custom adapter just overwrites the <strong>servletMapping</strong> method so the SOAP simulator API will be accessible for clients under this endpoint URI:</p>
<pre><code>http://localhhost:8080/my-soap-service/*
</code></pre><p>This is the simplest way to customize the simulator SOAP support. We can also use the adapter extension directly on the Spring boot main application class:</p>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> com.consol.citrus.simulator.annotation.EnableWebService;
<span class="hljs-keyword">import</span> com.consol.citrus.simulator.annotation.SimulatorWebServiceAdapter;
<span class="hljs-keyword">import</span> com.consol.citrus.simulator.annotation.SimulatorApplication;
<span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;

<span class="hljs-annotation">@SpringBootApplication</span>
<span class="hljs-annotation">@SimulatorApplication</span>
<span class="hljs-annotation">@EnableWebService</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Simulator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SimulatorWebServiceAdapter</span> </span>{

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> String <span class="hljs-title">servletMapping</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;/my-soap-service/**&quot;</span>;
    }

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> MappingKeyExtractor <span class="hljs-title">mappingKeyExtractor</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> SoapActionMappingKeyExtractor();
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
        SpringApplication.run(Simulator.class, args);
    }
}
</code></pre>
<p>So we have <strong>@EnableWebService</strong> and SOAP adapter customizations combined on one single class.</p>
<h3 id="advanced-customizations"><a name="advanced-customizations" class="plugin-anchor" href="#advanced-customizations"><span class="fa fa-link"></span></a>Advanced customizations</h3>
<p>For a more advanced configuration option we can extend the <strong>SimulatorWebServiceSupport</strong> implementation.</p>
<pre><code class="lang-java"><span class="hljs-keyword">import</span> com.consol.citrus.simulator.annotation.EnableWebService;
<span class="hljs-keyword">import</span> com.consol.citrus.simulator.annotation.SimulatorWebServiceSupport;
<span class="hljs-keyword">import</span> com.consol.citrus.simulator.annotation.SimulatorApplication;
<span class="hljs-keyword">import</span> org.springframework.boot.SpringApplication;
<span class="hljs-keyword">import</span> org.springframework.boot.autoconfigure.SpringBootApplication;

<span class="hljs-annotation">@SpringBootApplication</span>
<span class="hljs-annotation">@SimulatorApplication</span>
<span class="hljs-keyword">public</span> <span class="hljs-class"><span class="hljs-keyword">class</span> <span class="hljs-title">Simulator</span> <span class="hljs-keyword">extends</span> <span class="hljs-title">SimulatorWebServiceSupport</span> </span>{

    <span class="hljs-annotation">@Override</span>
    <span class="hljs-function"><span class="hljs-keyword">protected</span> String <span class="hljs-title">getServletMapping</span><span class="hljs-params">()</span> </span>{
        <span class="hljs-keyword">return</span> <span class="hljs-string">&quot;/my-soap-service/**&quot;</span>;
    }

    <span class="hljs-annotation">@Bean</span>
    <span class="hljs-function"><span class="hljs-keyword">public</span> ServletRegistrationBean <span class="hljs-title">messageDispatcherServlet</span><span class="hljs-params">(ApplicationContext applicationContext)</span> </span>{
        MessageDispatcherServlet servlet = <span class="hljs-keyword">new</span> MessageDispatcherServlet();
        servlet.setApplicationContext(applicationContext);
        servlet.setTransformWsdlLocations(<span class="hljs-keyword">true</span>);
        <span class="hljs-keyword">return</span> <span class="hljs-keyword">new</span> ServletRegistrationBean(servlet, getDispatcherServletMapping());
    }

    <span class="hljs-function"><span class="hljs-keyword">public</span> <span class="hljs-keyword">static</span> <span class="hljs-keyword">void</span> <span class="hljs-title">main</span><span class="hljs-params">(String[] args)</span> </span>{
        SpringApplication.run(Simulator.class, args);
    }
}
</code></pre>
<p>With that configuration option we can overwrite SOAP support auto configuration features on the simulator such as the <strong>messageDispatcherServlet</strong>. 
We can not use the <strong>@EnableWebService</strong> auto configuration annotation then. Instead we extend the <strong>SimulatorWebServiceSupport</strong> implementation directly.</p>

                    
                    </section>
                
                
                </div>
            </div>
        </div>

        
        <a href="./ws-support.html" class="navigation navigation-prev " aria-label="Previous page: Web Service support"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./jms-support.html" class="navigation navigation-next " aria-label="Next page: JMS support"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/app.js"></script>

    
    <script src="gitbook/plugins/gitbook-plugin-edit-link/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-code_tomorrow_scheme/code-tomorrow-scheme.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-code_tomorrow_scheme/plugin.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/lunr.min.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-search/search.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-sharing/buttons.js"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-fontsettings/buttons.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"edit-link":{"base":"https://github.com/christophd/citrus-simulator/edit/master/citrus-simulator-docs/src/manual","label":"Improve This Page"},"anchors":{},"code_tomorrow_scheme":{},"highlight":{},"search":{"maxIndexSize":1000000},"sharing":{"all":["facebook","google","twitter","weibo","instapaper"],"facebook":true,"google":false,"instapaper":false,"twitter":true,"vk":false,"weibo":false},"fontsettings":{"family":"sans","size":2,"theme":"white"}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
